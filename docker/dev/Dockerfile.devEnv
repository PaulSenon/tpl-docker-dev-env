# Development environment base image
FROM node:22-slim

WORKDIR /app

RUN apt-get update && \
  apt-get install -y git make nano curl && \
  apt-get clean && \
  rm -rf /var/lib/apt/lists/*

RUN npm i -g @anthropic-ai/claude-code
RUN npm i -g opencode-ai@latest
RUN npm i -g @openai/codex@latest

COPY package.json .
COPY pnpm-lock.yaml .

# Install system dependencies and package manager
RUN npm install -g corepack && \
  corepack enable && \
  corepack prepare pnpm@latest --activate

# copy your shell and git configs
COPY ./docker/dev/settings/.bashrc /root/.bashrc

# Dependencies installed at runtime, not build time
CMD ["bash"]
